<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Syllable Mapper</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Fredoka', sans-serif;
      padding: 20px;
    }

    #word-input {
      margin-bottom: 20px;
      font-size: 1.2em;
      padding: 5px;
    }

    .letter-container {
      display: inline-block;
      text-align: center;
      margin: 0 5px;
      width: 60px;
      position: relative;
    }

    .letter-display {
      font-size: 2.5em;
      position: relative;
      z-index: 1;
    }

    .above-symbol, .below-symbol {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2em;
      cursor: pointer;
      z-index: 2;
      user-select: none;
    }

    .above-symbol {
      top: -40px;
    }

    .below-symbol {
      bottom: -40px;
    }

    .divider {
      position: absolute;
      width: 4px;
      height: 80px;
      background-color: black;
      cursor: ew-resize;
      top: 60px; /* vertically between above/below symbols */
      z-index: 3;
    }

    .multi-letter-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      height: 60px;
      background-color: rgba(0, 0, 255, 0.1);
      border: 2px solid blue;
      cursor: move;
    }

    .resize-handle {
      position: absolute;
      right: -5px;
      top: 0;
      width: 10px;
      height: 100%;
      cursor: ew-resize;
      background: rgba(0, 0, 0, 0.2);
    }

    #word-display {
      position: relative;
      height: 280px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>
  <h1>Syllable Mapper</h1>
  <input id="word-input" type="text" placeholder="Type a word here..." />
  <button onclick="renderWord()">Enter</button>
  <button onclick="resetWord()">Reset</button>
  <button onclick="addDivider()">Add Divider</button>

  <div id="word-display"></div>

  <script>
    const aboveOptions = ["", "\u02D8", "\u00AF"]; // ˘, ¯
    const belowOptions = ["", "V", "C"];

    function renderWord() {
      const input = document.getElementById("word-input").value.trim();
      const display = document.getElementById("word-display");
      display.innerHTML = "";

      for (let i = 0; i < input.length; i++) {
        const container = document.createElement("div");
        container.className = "letter-container";

        const above = document.createElement("div");
        above.className = "above-symbol";
        above.textContent = "";
        above.onclick = () => {
          const idx = aboveOptions.indexOf(above.textContent);
          above.textContent = aboveOptions[(idx + 1) % aboveOptions.length];
        };

        const letterEl = document.createElement("div");
        letterEl.className = "letter-display";
        letterEl.textContent = input[i];

        const below = document.createElement("div");
        below.className = "below-symbol";
        below.textContent = "";
        below.onclick = () => {
          const idx = belowOptions.indexOf(below.textContent);
          below.textContent = belowOptions[(idx + 1) % belowOptions.length];
        };

        container.appendChild(above);
        container.appendChild(letterEl);
        container.appendChild(below);

        display.appendChild(container);
      }
    }

    function resetWord() {
      document.getElementById("word-input").value = "";
      document.getElementById("word-display").innerHTML = "";
    }

    function addDivider() {
      const display = document.getElementById("word-display");
      const divider = document.createElement("div");
      divider.className = "divider";
      divider.style.left = "100px"; // Default position

      divider.onmousedown = function (e) {
        const shiftX = e.clientX - divider.getBoundingClientRect().left;

        function moveAt(pageX) {
          divider.style.left = pageX - display.getBoundingClientRect().left - shiftX + 'px';
        }

        function onMouseMove(e) {
          moveAt(e.pageX);
        }

        document.addEventListener('mousemove', onMouseMove);
        document.onmouseup = () => {
          document.removeEventListener('mousemove', onMouseMove);
          document.onmouseup = null;
        };
      };

      display.appendChild(divider);
    }
  </script>
</body>
</html>
